#ifndef BEAGLE_GPIO_CONST
#define BEAGLE_GPIO_CONST

#include <cstring>
#include <optional>
#include <vector>

namespace beagle {
namespace gpio {

typedef struct modes {
    const char* mode0;
    const char* mode1;
    const char* mode2;
    const char* mode3;
    const char* mode4;
    const char* mode5;
    const char* mode6;
    const char* mode7;
} modes_t;

typedef struct pins_t {
    const char* name;
    const char* key;
    unsigned int gpio;
    int pwm_mux_mode;
    int ain;
    int is_allocated_by_default;
    modes_t modes;
} pins_t;

constexpr const char* edge[] = {"none", "rising", "falling", "both"};

// partially copied from:
// https://raw.github.com/jadonk/bonescript/master/node_modules/bonescript/bone.js
constexpr pins_t pinTable[] = {
    {"USR0",
     "USR0",
     53,
     -1,
     -1,
     1,
     {"gpmc_a5", "gmii2_txd0", "rgmii2_td0", "rmii2_txd0", "gpmc_a21",
      "pr1_mii1_rxd3", "eqep1b_in", "gpio1_21"}},
    {"USR1",
     "USR1",
     54,
     -1,
     -1,
     1,
     {"gpmc_a6", "gmii2_txclk", "rgmii2_tclk", "mmc2_dat4", "gpmc_a22",
      "pr1_mii1_rxd2", "eqep1_index", "gpio1_22"}},
    {"USR2",
     "USR2",
     55,
     -1,
     -1,
     1,
     {"gpmc_a7", "gmii2_rxclk", "rgmii2_rclk", "mmc2_dat5", "gpmc_a23",
      "pr1_mii1_rxd1", "eqep1_strobe", "gpio1_23"}},
    {"USR3",
     "USR3",
     56,
     -1,
     -1,
     1,
     {"gpmc_a8", "gmii2_rxd3", "rgmii2_rd3", "mmc2_dat6", "gpmc_a24",
      "pr1_mii1_rxd0", "mcasp0_aclkx", "gpio1_24"}},
    {"DGND", "P8_1", 0, -1, -1, -1, nullptr},
    {"DGND", "P8_2", 0, -1, -1, -1, nullptr},
    {"GPIO1_6",
     "P8_3",
     38,
     -1,
     -1,
     1,
     {"gpmc_ad6", "mmc1_dat6", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_6"}},
    {"GPIO1_7",
     "P8_4",
     39,
     -1,
     -1,
     1,
     {"gpmc_ad7", "mmc1_dat7", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_7"}},
    {"GPIO1_2",
     "P8_5",
     34,
     -1,
     -1,
     1,
     {"gpmc_ad2", "mmc1_dat2", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_2"}},
    {"GPIO1_3",
     "P8_6",
     35,
     -1,
     -1,
     1,
     {"gpmc_ad3", "mmc1_dat3", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_3"}},
    {"TIMER4",
     "P8_7",
     66,
     -1,
     -1,
     0,
     {"gpmc_advn_ale", nullptr, "timer4", nullptr, nullptr, nullptr, nullptr,
      "gpio2_2"}},
    {"TIMER7",
     "P8_8",
     67,
     -1,
     -1,
     0,
     {"gpmc_oen_ren", nullptr, "timer7", nullptr, nullptr, nullptr, nullptr,
      "gpio2_3"}},
    {"TIMER5",
     "P8_9",
     69,
     -1,
     -1,
     0,
     {"gpmc_ben0_cle", nullptr, "timer5", nullptr, nullptr, nullptr, nullptr,
      "gpio2_5"}},
    {"TIMER6",
     "P8_10",
     68,
     -1,
     -1,
     0,
     {"gpmc_wen", nullptr, "timer6", nullptr, nullptr, nullptr, nullptr,
      "gpio2_4"

     }},
    {"GPIO1_13",
     "P8_11",
     45,
     -1,
     -1,
     0,
     {"gpmc_ad13", "lcd_data18", "mmc1_dat5", "mmc2_dat1", "eqep2B_in",
      "pr1_mii0_txd", "pr1_pru0_pru_r30_15", "gpio1_13"}},
    {"GPIO1_12",
     "P8_12",
     44,
     -1,
     -1,
     0,
     {"gpmc_ad12", "lcd_data19", "mmc1_dat4", "mmc2_dat0", "eqep2a_in",
      "pr1_mii0_txd2", "pr1_pru0_pru_r30_14", "gpio1_12"}},
    {"EHRPWM2B",
     "P8_13",
     23,
     4,
     -1,
     0,
     {"gpmc_ad9", "lcd_data22", "mmc1_dat1", "mmc2_dat5", "ehrpwm2B",
      "pr1_mii0_col", nullptr, "gpio0_23"}},
    {"GPIO0_26",
     "P8_14",
     26,
     -1,
     -1,
     0,
     {"gpmc_ad10", "lcd_data21", "mmc1_dat2", "mmc2_dat6",
      "ehrpwm2_tripzone_input", "pr1_mii0_txen", nullptr, "gpio0_26"}},
    {"GPIO1_15",
     "P8_15",
     47,
     -1,
     -1,
     0,
     {"gpmc_ad15", "lcd_data16", "mmc1_dat7", "mmc2_dat3", "eqep2_strobe",
      "pr1_ecap0_ecap_capin_apwm_o", "pr1_pru0_pru_r31_15", "gpio1_15"}},
    {"GPIO1_14",
     "P8_16",
     46,
     -1,
     -1,
     0,
     {"gpmc_ad14", "lcd_data17", "mmc1_dat6", "mmc2_dat2", "eqep2_index",
      "pr1_mii0_txd0", "pr1_pru0_pru_r31_14", "gpio1_14"}},
    {"GPIO0_27",
     "P8_17",
     27,
     -1,
     -1,
     0,
     {"gpmc_ad11", "lcd_data20", "mmc1_dat3", "mmc2_dat7", "ehrpwm0_synco",
      "pr1_mii0_txd3", nullptr, "gpio0_27"}},
    {"GPIO2_1",
     "P8_18",
     65,
     -1,
     -1,
     0,
     {"gpmc_clk", "lcd_memory_clk_mux", nullptr, "mmc2_clk", nullptr, nullptr,
      "mcasp0_fsr", "gpio2_1"}},
    {"EHRPWM2A",
     "P8_19",
     22,
     4,
     -1,
     0,
     {"gpmc_ad8", "lcd_data23", "mmc1_dat0", "mmc2_dat4", "ehrpwm2A",
      "pr1_mii_mt0_clk", nullptr, "gpio0_22"}},
    {"GPIO1_31",
     "P8_20",
     63,
     -1,
     -1,
     1,
     {"gpmc_csn2", "gpmc_be1n", "mmc1_cmd", "pr1_edio_data_in7",
      "pr1_edio_data_out7", "pr1_pru1_pru_r30_13", "pr1_pru1_pru_r31_13",
      "gpio1_31"}},
    {"GPIO1_30",
     "P8_21",
     62,
     -1,
     -1,
     1,
     {"gpmc_csn1", "gpmc_clk", "mmc1_clk", "pr1_edio_data_in6",
      "pr1_edio_data_out6", "pr1_pru1_pru_r30_12", "pr1_pru1_pru_r31_12",
      "gpio1_30"}},
    {"GPIO1_5",
     "P8_22",
     37,
     -1,
     -1,
     1,
     {"gpmc_ad5", "mmc1_dat5", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_5"}},
    {"GPIO1_4",
     "P8_23",
     36,
     -1,
     -1,
     1,
     {"gpmc_ad4", "mmc1_dat4", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_4"}},
    {"GPIO1_1",
     "P8_24",
     33,
     -1,
     -1,
     1,
     {"gpmc_ad1", "mmc1_dat1", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_1"}},
    {"GPIO1_0",
     "P8_25",
     32,
     -1,
     -1,
     1,
     {"gpmc_ad0", "mmc1_dat0", nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_0"}},
    {"GPIO1_29",
     "P8_26",
     61,
     -1,
     -1,
     0,
     {"gpmc_csn0", nullptr, nullptr, nullptr, nullptr, nullptr, nullptr,
      "gpio1_29"}},
    {"GPIO2_22",
     "P8_27",
     86,
     -1,
     -1,
     1,
     {"lcd_vsync", "gpmc_a8", nullptr, "pr1_edio_data_in2",
      "pr1_edio_data_out2", "pr1_pru1_pru_r30_8", "pr1_pru1_pru_r31_8",
      "gpio2_22"}},
    {"GPIO2_24",
     "P8_28",
     88,
     -1,
     -1,
     1,
     {"lcd_pclk", "gpmc_a10", "pr1_mii0_crs", "pr1_edio_data_in4",
      "pr1_edio_data_out4", "pr1_pru1_pru_r30_10", "pr1_pru1_pru_r31_10",
      "gpio2_24"}},
    {"GPIO2_23",
     "P8_29",
     87,
     -1,
     -1,
     1,
     {"lcd_hsync", "gpmc_a9", "gpmc_a2", "pr1_edio_data_in3",
      "pr1_edio_data_out3", "pr1_pru1_pru_r30_9", "pr1_pru1_pru_r31_9",
      "gpio2_23"}},
    {"GPIO2_25",
     "P8_30",
     89,
     -1,
     -1,
     1,
     {"lcd_ac_bias_en", "gpmc_a11", "pr1_mii1_crs", "pr1_edio_data_in5",
      "pr1_edio_data_out5", "pr1_pru1_pru_r30_11", "pr1_pru1_pru_r31_11",
      "gpio2_25"}},
    {"UART5_CTSN",
     "P8_31",
     10,
     -1,
     -1,
     1,
     {"lcd_data14", "gpmc_a18", nullptr, "mcasp0_axr1", nullptr, nullptr,
      nullptr, "gpio0_10"}},
    {"UART5_RTSN",
     "P8_32",
     11,
     -1,
     -1,
     1,
     {"lcd_data15", "gpmc_a19", nullptr, "mcasp0_ahclkx", "mcasp0_axr3",
      nullptr, nullptr, "gpio0_11"}},
    {"UART4_RTSN",
     "P8_33",
     9,
     -1,
     -1,
     1,
     {"lcd_data13", "gpmc_a17", nullptr, "mcasp0_fsr", "mcasp0_axr3", nullptr,
      nullptr, "gpio0_9"}},
    {"UART3_RTSN",
     "P8_34",
     81,
     2,
     -1,
     1,
     {"lcd_data11", "gpmc_a15", nullptr, "mcasp0_ahclkr", "mcasp0_axr2",
      nullptr, nullptr, "gpio2_17"}},
    {"UART4_CTSN",
     "P8_35",
     8,
     -1,
     -1,
     1,
     {"lcd_data12", "gpmc_a16", nullptr, "mcasp0_aclkr", "mcasp0_axr2", nullptr,
      nullptr, "gpio0_8"}},
    {"UART3_CTSN",
     "P8_36",
     80,
     2,
     -1,
     1,
     {"lcd_data10", "gpmc_a14", "ehrpwm1A", "mcasp0_axr0", "mcasp0_axr0",
      "pr1_mii0_rxd1", "uart3_ctsn", "gpio2_16"}},
    {"UART5_TXD",
     "P8_37",
     78,
     -1,
     -1,
     1,
     {"lcd_data8", "gpmc_a12", nullptr, "mcasp0_aclkx", nullptr, nullptr,
      "uart2_ctsn", "gpio2_14"}},
    {"UART5_RXD",
     "P8_38",
     79,
     -1,
     -1,
     1,
     {"lcd_data9", "gpmc_a13", nullptr, "mcasp0_fsx", nullptr, nullptr,
      "uart2_rtsn", "gpio2_15"}},
    {"GPIO2_12",
     "P8_39",
     76,
     -1,
     -1,
     1,
     {"lcd_data6", "gpmc_a6", "pr1_edio_data_in6", "eqep2_index",
      "pr1_edio_data_out6", "pr1_pru1_pru_r30_6", "pr1_pru1_pru_r31_6",
      "gpio2_12"}},
    {"GPIO2_13",
     "P8_40",
     77,
     -1,
     -1,
     1,
     {"lcd_data7", "gpmc_a7", "pr1_edio_data_in7", "eqep2_strobe",
      "pr1_edio_data_out_7", "pr1_pru1_pru_r30_7", "pr1_pru1_pru_r31_7",
      "gpio2_13"}},
    {"GPIO2_10",
     "P8_41",
     74,
     -1,
     -1,
     1,
     {"lcd_data4", "gpmc_a4", "pr1_mii0_txd1", "eQEP2A_in", nullptr,
      "pr1_pru1_pru_r30_4", "pr1_pru1_pru_r31_4", "gpio2_10"}},
    {"GPIO2_11",
     "P8_42",
     75,
     -1,
     -1,
     1,
     {"lcd_data5", "gpmc_a5", "pr1_mii0_txd0", "eqep2b_in", nullptr,
      "pr1_pru1_pru_r30_5", "pr1_pru1_pru_r31_5", "gpio2_11"}},
    {"GPIO2_8",
     "P8_43",
     72,
     -1,
     -1,
     1,
     {"lcd_data2", "gpmc_a2", "pr1_mii0_txd3", "ehrpwm2_tripzone_input",
      nullptr, "pr1_pru1_pru_r30_2", "pr1_pru1_pru_r31_2", "gpio2_8"}},
    {"GPIO2_9",
     "P8_44",
     73,
     -1,
     -1,
     1,
     {"lcd_data3", "gpmc_a3", "pr1_mii0_txd2", "ehrpwm0_synco", nullptr,
      "pr1_pru1_pru_r30_3", "pr1_pru1_pru_r31_3", "gpio2_9"}},
    {"GPIO2_6",
     "P8_45",
     70,
     3,
     -1,
     1,
     {"lcd_data0", "gpmc_a0", "pr1_mii_mt0_clk", "ehrpwm2A", nullptr,
      "pr1_pru1_pru_r30_0", "pr1_pru1_pru_r31_0", "gpio2_6"}},
    {"GPIO2_7",
     "P8_46",
     71,
     3,
     -1,
     1,
     {"lcd_data1", "gpmc_a1", "pr1_mii0_txen", "ehrpwm2B", nullptr,
      "pr1_pru1_pru_r30_1", "pr1_pru1_pru_r31_1", "gpio2_7"}},
    {"DGND", "P9_1", 0, -1, -1, -1, nullptr},
    {"DGND", "P9_2", 0, -1, -1, -1, nullptr},
    {"VDD_3V3", "P9_3", 0, -1, -1, -1, nullptr},
    {"VDD_3V3", "P9_4", 0, -1, -1, -1, nullptr},
    {"VDD_5V", "P9_5", 0, -1, -1, -1, nullptr},
    {"VDD_5V", "P9_6", 0, -1, -1, -1, nullptr},
    {"SYS_5V", "P9_7", 0, -1, -1, -1, nullptr},
    {"SYS_5V", "P9_8", 0, -1, -1, -1, nullptr},
    {"PWR_BUT", "P9_9", 0, -1, -1, -1, nullptr},
    {"SYS_RESETn", "P9_10", 0, -1, -1, -1, nullptr},
    {"UART4_RXD",
     "P9_11",
     30,
     -1,
     -1,
     0,
     {"gpmc_wait0", "mii2_crs", "gpmc_csn4", "rmii2_crs_dv", "mmc1_sdcd",
      "pr1_mii1_col", "uart4_rxd", "gpio0_30"}},
    {"GPIO1_28",
     "P9_12",
     60,
     -1,
     -1,
     0,
     {"gpmc_ben1", "mii2_col", nullptr, "mmc2_dat3", nullptr, nullptr,
      "mcasp0_aclkr", "gpio1_28"}},
    {"UART4_TXD",
     "P9_13",
     31,
     -1,
     -1,
     0,
     {"gpmc_wpn", "mii2_rxerr", nullptr, "rmii2_rxerr", "mmc2_sdcd", nullptr,
      nullptr, "gpio0_31"}},
    {"EHRPWM1A",
     "P9_14",
     50,
     6,
     -1,
     0,
     {"gpmc_a2", "gmii2_txd3", "rgmii2_td3", "mmc2_dat1", "gpmc_a18",
      "pr1_mii1_txd2", "ehrpwm1A", "gpio1_18"}},
    {"GPIO1_16",
     "P9_15",
     48,
     -1,
     -1,
     0,
     {"gpmc_a0", "gmii2_txen", "rgmii2_tctl", "rmii2_txen", "gpmc_a16",
      "pr1_mii_mt1_clk", "ehrpwm1_tripzone_input", "gpio1_16"}},
    {"EHRPWM1B",
     "P9_16",
     51,
     6,
     -1,
     0,
     {"gpmc_a3", "gmii2_txd2", "rgmii2_td2", "mmc2_dat2", "gpmc_a19",
      "pr1_mii1_txd1", "ehrpwm1B", "gpio1_19"}},
    {"I2C1_SCL",
     "P9_17",
     5,
     -1,
     -1,
     0,
     {"spi0_cs0", "mmc2_sdwp", "i2c1_scl", "ehrpwm0_synci", "pr1_uart0_txd",
      "pr1_edio_data_in1", "pr1_edio_data_out1", "gpio0_5"}},
    {"I2C1_SDA",
     "P9_18",
     4,
     -1,
     -1,
     0,
     {"spi0_d1", "mmc1_sdwp", "i2c1_sda", "ehrpwm0_tripzone_input",
      "pr1_uart0_rxd", "pr1_edio_data_in0", "pr1_edio_data_out0", "gpio0_4"}},
    {"I2C2_SCL",
     "P9_19",
     13,
     -1,
     -1,
     1,
     {"uart1_rtsn", "timer5", "d_can0_rx", "i2c2_scl", "spi1_cs1",
      "pr1_uart0_rts_n", "pr1_edc_latch1_in", "gpio0_13"}},
    {"I2C2_SDA",
     "P9_20",
     12,
     -1,
     -1,
     1,
     {"uart1_ctsn", nullptr, "d_can0_tx", "i2c2_sda", "spi1_cs0",
      "pr1_uart0_cts_n", "pr1_edc_latch0_in", "gpio0_12"}},
    {"UART2_TXD",
     "P9_21",
     3,
     3,
     -1,
     0,
     {"spi0_d0", "uart2_txd", "i2c2_scl", "ehrpwm0B", "pr1_uart_rts_n",
      "pr1_edio_latch_in", "EMU3", "gpio0_3"}},
    {"UART2_RXD",
     "P9_22",
     2,
     3,
     -1,
     0,
     {"spi0_sclk", "uart2_rxd", "i2c2_sda", "ehrpwm0A", "pr1_uart_cts_n",
      "pr1_edio_sof", "EMU2", "gpio0_2"}},
    {"GPIO1_17",
     "P9_23",
     49,
     -1,
     -1,
     0,
     {"gpmc_a1", "gmii2_rxdv", "rgmii2_rctl", "mmc2_dat0", "gpmc_a17",
      "pr1_mii1_txd3", "ehrpwm0_synco", "gpio1_17"}},
    {"UART1_TXD",
     "P9_24",
     15,
     -1,
     -1,
     0,
     {"uart1_txd", "mmc2_sdwp", "d_can1_rx", "i2c1_scl", nullptr,
      "pr1_uart0_txd_mux1", nullptr, "gpio0_15"}},
    {"GPIO3_21",
     "P9_25",
     117,
     -1,
     -1,
     1,
     {"mcasp0_ahclkx", nullptr, "mcasp0_axr3", "mcasp1_axr1", nullptr, nullptr,
      nullptr, "gpio3_21"}},
    {"UART1_RXD",
     "P9_26",
     14,
     -1,
     -1,
     0,
     {"uart1_rxd", "mmc1_sdwp", "d_can1_tx", "i2c1_sda", nullptr,
      "pr1_uart0_rxd_mux1", "pr1_pru1_pru_r31_16", "gpio0_14"}},
    {"GPIO3_19",
     "P9_27",
     115,
     -1,
     -1,
     0,
     {"mcasp0_fsr", nullptr, "mcasp0_axr3", "mcasp1_fsx", "EMU2",
      "pr1_pru0_pru_r30_5", "pr1_pru0_pru_r31_5", "gpio3_19"}},
    {"SPI1_CS0",
     "P9_28",
     113,
     4,
     -1,
     1,
     {"mcasp0_ahclkr", nullptr, "mcasp0_axr2", "spi1_cs0", "eCAP2_in_PWM2_out",
      "pr1_pru0_pru_r30_3", "pr1_pru0_pru_r31_3", "gpio3_17"}},
    {"SPI1_D0",
     "P9_29",
     111,
     1,
     -1,
     1,
     {"mcasp0_fsx", "ehrpwm0B", nullptr, "spi1_d0", "mmc1_sdcd",
      "pr1_pru0_pru_r30_1", "pr1_pru0_pru_r31_1", "gpio3_15"}},
    {"SPI1_D1",
     "P9_30",
     112,
     -1,
     -1,
     0,
     {"mcasp0_axr0", nullptr, nullptr, "spi1_d1", "mmc2_sdcd",
      "pr1_pru0_pru_r30_2", "pr1_pru0_pru_r31_2", "gpio3_16"}},
    {"SPI1_SCLK",
     "P9_31",
     110,
     1,
     -1,
     1,
     {"mcasp0_aclkx", "ehrpwm0A", nullptr, "spi1_sclk", "mmc0_sdcd",
      "pr1_pru0_pru_r30_0", "pr1_pru0_pru_r31_0", "gpio3_14"}},
    {"VDD_ADC", "P9_32", 0, -1, -1, -1, nullptr},
    {"AIN4", "P9_33", 0, -1, 4, -1, nullptr},
    {"GNDA_ADC", "P9_34", 0, -1, -1, -1, nullptr},
    {"AIN6", "P9_35", 0, -1, 6, -1, nullptr},
    {"AIN5", "P9_36", 0, -1, 5, -1, nullptr},
    {"AIN2", "P9_37", 0, -1, 2, -1, nullptr},
    {"AIN3", "P9_38", 0, -1, 3, -1, nullptr},
    {"AIN0", "P9_39", 0, -1, 0, -1, nullptr},
    {"AIN1", "P9_40", 0, -1, 1, -1, nullptr},
    {"CLKOUT2",
     "P9_41",
     20,
     -1,
     -1,
     0,
     {"xdma_event_intr1", nullptr, nullptr, "clkout2", nullptr, nullptr,
      nullptr, "gpio0_20"}},
    {"GPIO0_7",
     "P9_42",
     7,
     0,
     -1,
     0,
     {"eCAP0_in_PWM0_out", "uart3_txd", "spi1_cs1",
      "pr1_ecap0_ecap_capin_apwm_o", "spi1_sclk", "mmc0_sdwp",
      "xdma_event_intr2", "gpio0_7"}},
    {"DGND", "P9_43", 0, -1, -1, -1, nullptr},
    {"DGND", "P9_44", 0, -1, -1, -1, nullptr},
    {"DGND", "P9_45", 0, -1, -1, -1, nullptr},
    {"DGND", "P9_46", 0, -1, -1, -1, nullptr}};

std::optional<pins_t> getPin(const char* key) noexcept;
std::optional<pins_t> getPin(unsigned int pin) noexcept;
std::optional<int> getEdgeIndex(const char* value) noexcept;
std::vector<pins_t> findMode(const char* mode) noexcept;

} // namespace gpio
} // namespace beagle
#endif // BEAGLE_GPIO_CONST
